"""
Conversation Trainer Engine - Provides guidance for improving conversation skills and emotional intelligence.
"""

def handle_conversation_query(prompt: str) -> str:
    """
    Handles queries related to conversation skills, social intelligence, and effective communication.

    Args:
        prompt (str): The user's prompt/query related to conversation skills

    Returns:
        str: Response with guidance for improving conversation skills
    """
    # Simple keyword-based response system
    # In a real implementation, this would connect to a more sophisticated conversation training system

    if "ثقة" in prompt or "خجل" in prompt:
        return "للتحدث بثقة أكبر والتغلب على الخجل في المحادثات:\n\n1. التحضير المسبق: فكر في مواضيع محتملة للحديث قبل المناسبات الاجتماعية.\n\n2. ابدأ صغيراً: مارس المحادثات القصيرة مع أشخاص تشعر بالراحة معهم، ثم وسّع دائرتك تدريجياً.\n\n3. اطرح أسئلة مفتوحة: تبدأ بـ \"كيف\" أو \"لماذا\" وتشجع على إجابات مطولة.\n\n4. تدرب على لغة الجسد: الوقفة المستقيمة، التواصل البصري المناسب، والابتسامة تعزز الثقة.\n\n5. تقبل الصمت: لا تشعر بالحاجة لملء كل لحظة صمت، فالصمت جزء طبيعي من المحادثة.\n\n6. مارس التنفس العميق: يساعد على تهدئة التوتر قبل وأثناء المحادثات.\n\nتذكر أن الثقة في المحادثة تأتي مع الممارسة، وأن معظم الناس يركزون على أنفسهم أكثر مما يلاحظون أخطاءك."

    elif "استماع" in prompt or "إنصات" in prompt:
        return "لتحسين مهارات الاستماع الفعال في المحادثات:\n\n1. أعط انتباهك الكامل: تجنب النظر إلى هاتفك أو التفكير فيما ستقوله لاحقاً.\n\n2. استخدم لغة جسد إيجابية: الإيماء بالرأس والتواصل البصري تظهر اهتمامك.\n\n3. لا تقاطع: دع الشخص يكمل فكرته قبل أن تستجيب.\n\n4. اطرح أسئلة توضيحية: \"هل تقصد...؟\" أو \"هل يمكنك التوضيح أكثر؟\"\n\n5. لخص ما سمعته: \"إذاً ما تقوله هو...\" للتأكد من فهمك الصحيح.\n\n6. تجاوب عاطفياً: اعترف بمشاعر المتحدث مثل \"يبدو أن هذا كان محبطاً\".\n\nالاستماع الجيد يبني الثقة ويعمق العلاقات أكثر من الكلام البليغ."

    elif "موضوع" in prompt or "محادثة" in prompt:
        return "لبدء محادثات ممتعة والحفاظ عليها:\n\n1. ابدأ بتعليق على سياق مشترك: المكان، الحدث، أو تجربة مشتركة.\n\n2. استخدم أسئلة FORD: العائلة (Family)، المهنة (Occupation)، الترفيه (Recreation)، والأحلام (Dreams).\n\n3. اظهر اهتماماً حقيقياً: اسأل أسئلة متابعة بناءً على إجاباتهم.\n\n4. شارك قصصاً شخصية مناسبة: التبادل يبني التواصل.\n\n5. انتبه للإشارات: إذا أظهر الشخص اهتماماً بموضوع معين، استمر فيه.\n\n6. تجنب المونولوج: حافظ على توازن الحديث بينكما.\n\n7. اختتم بلطف: لخص، عبر عن تقديرك للمحادثة، واترك الباب مفتوحاً للتواصل المستقبلي.\n\nالمحادثات الجيدة تشبه لعبة التنس: تبادل متوازن مع اهتمام متبادل."

    elif "ذكاء عاطفي" in prompt or "تعاطف" in prompt:
        return "لتنمية الذكاء العاطفي والتعاطف في المحادثات:\n\n1. تعرف على مشاعرك: لاحظ مشاعرك وتأثيرها على تواصلك.\n\n2. استمع للمشاعر وراء الكلمات: انتبه لنبرة الصوت ولغة الجسد والسياق.\n\n3. تحقق من فهمك للمشاعر: \"يبدو أنك تشعر بـ... هل هذا صحيح؟\"\n\n4. تجنب الحكم أو تقديم حلول سريعة: أحياناً الناس يحتاجون فقط لمن يسمعهم.\n\n5. شارك مشاعرك بطريقة مناسبة: التعبير الصادق عن المشاعر يعمق التواصل.\n\n6. اعترف بوجهات النظر المختلفة: يمكن تفهم مشاعر الآخرين حتى لو اختلفت معهم.\n\nالذكاء العاطفي يحسن جودة علاقاتك ويساعدك على التنقل في المواقف الاجتماعية المعقدة."

    elif "نقاش" in prompt or "جدال" in prompt:
        return "للمشاركة في نقاشات بناءة وتجنب الجدال العقيم:\n\n1. حدد هدفك: هل تريد الفهم، إقناع الآخر، أو الوصول لحل وسط؟\n\n2. استمع بانفتاح: افهم وجهة نظر الطرف الآخر قبل الرد.\n\n3. ابحث عن أرضية مشتركة: ابدأ بالنقاط التي تتفقان عليها.\n\n4. استخدم أسلوب غير هجومي: تجنب العبارات المطلقة مثل \"دائماً\" و\"أبداً\".\n\n5. اعتمد على الحقائق: قدم أدلة وأمثلة محددة بدلاً من التعميمات.\n\n6. كن مستعداً لتغيير رأيك: النقاش الجيد قد يؤدي إلى رؤى جديدة.\n\n7. اعرف متى تنسحب: إذا أصبح النقاش حاداً أو غير منتج، يمكن تأجيله.\n\nالهدف من النقاش الجيد هو الوصول إلى فهم أعمق، وليس بالضرورة \"الفوز\" في الجدال."

    elif "إقناع" in prompt or "تأثير" in prompt:
        return "لتحسين قدرتك على الإقناع والتأثير في المحادثات:\n\n1. ابنِ علاقة أولاً: الناس أكثر استعداداً للاقتناع ممن يثقون بهم.\n\n2. افهم جمهورك: ما الذي يهمهم؟ ما هي قيمهم ومخاوفهم؟\n\n3. قدم قصصاً وأمثلة: القصص أكثر إقناعاً من الإحصاءات المجردة.\n\n4. استخدم لغة إيجابية: ركز على الفوائد والحلول بدلاً من المشاكل.\n\n5. كن أصيلاً: الصدق والأصالة يبنيان المصداقية.\n\n6. استمع للاعتراضات: تفهم مخاوف الآخرين وعالجها بدلاً من تجاهلها.\n\n7. اختتم بدعوة واضحة للعمل: وضح ما تريد من الشخص أن يفعله بالضبط.\n\nالإقناع الفعال يأتي من الفهم العميق والاحترام المتبادل، وليس من الضغط أو التلاعب."

    elif "مناسبة" in prompt or "تجمع" in prompt or "حفلة" in prompt:
        return "للتعامل مع المناسبات الاجتماعية والتجمعات بثقة:\n\n1. حضّر نفسك ذهنياً: فكر في بعض المواضيع المحتملة للحديث قبل الحضور.\n\n2. صل مبكراً: من الأسهل الاندماج عندما تكون المجموعة صغيرة في البداية.\n\n3. ابدأ بالتعرف على شخص واحد: ركز على بناء محادثة واحدة جيدة بدلاً من محاولة التحدث مع الجميع.\n\n4. استخدم الأسئلة المفتوحة: \"كيف تعرفت على المضيف؟\" أو \"ما رأيك في هذا الحدث؟\"\n\n5. كن مستمعاً جيداً: الناس يحبون من ينصت إليهم باهتمام.\n\n6. انتقل بلباقة: لتغيير المجموعة، يمكنك القول \"كان من الرائع التحدث معك، سأذهب لألقي التحية على...\".\n\n7. خذ فترات راحة: من المقبول أخذ وقت للابتعاد وإعادة شحن طاقتك الاجتماعية.\n\nتذكر أن معظم الناس في التجمعات يشعرون بالقلق الاجتماعي بدرجة ما، فأنت لست وحدك."

    elif "لغة جسد" in prompt or "تواصل غير لفظي" in prompt:
        return "لفهم وتحسين لغة الجسد والتواصل غير اللفظي:\n\n1. الوضعية: قف أو اجلس بظهر مستقيم لتظهر الثقة والانتباه.\n\n2. التواصل البصري: حافظ على تواصل بصري متوازن (70-80% من الوقت) دون تحديق.\n\n3. تعابير الوجه: اجعل تعابيرك متناسبة مع محتوى المحادثة، والابتسامة الصادقة تظهر في العينين.\n\n4. الإيماءات: استخدم حركات يدين طبيعية ومفتوحة لتعزيز كلامك.\n\n5. المسافة الشخصية: احترم المسافة المناسبة ثقافياً (عادة 1.5-4 أقدام للمحادثات الشخصية).\n\n6. الصوت: انتبه لنبرة صوتك وسرعة كلامك، واضبطهما حسب السياق.\n\n7. المزامنة: لاحظ كيف تتناغم لغة جسدك مع الآخرين بشكل طبيعي عند التواصل الجيد.\n\nلغة الجسد تنقل أكثر من 50% من رسالتك، لذا اجعلها متناسقة مع كلماتك."

    elif "صراحة" in prompt or "تعبير" in prompt:
        return "للتعبير عن نفسك بصراحة وأصالة في المحادثات:\n\n1. تعرف على قيمك ومعتقداتك: الوضوح الداخلي يؤدي إلى التعبير الخارجي الواضح.\n\n2. ابدأ بعبارات \"أنا\": \"أشعر...\"، \"أعتقد...\"، \"أحتاج...\" للتعبير عن وجهة نظرك دون إلقاء اللوم.\n\n3. كن محدداً: بدلاً من \"أنا غاضب\"، قل \"أشعر بالإحباط عندما يتم مقاطعتي\".\n\n4. وازن بين الصراحة واللطف: يمكن أن تكون صادقاً دون أن تكون قاسياً.\n\n5. اختر التوقيت المناسب: بعض المحادثات تحتاج إلى وقت وخصوصية مناسبين.\n\n6. تقبل ردود الفعل المختلفة: ليس الجميع سيتفق مع آرائك، وهذا طبيعي.\n\nالتعبير الصادق عن النفس يبني علاقات أعمق ويقلل من سوء الفهم والتوتر."

    else:
        return "مهارات المحادثة والذكاء الاجتماعي يمكن تطويرها مع الممارسة والوعي. يمكنني مساعدتك في تحسين جوانب مختلفة من التواصل مثل: التحدث بثقة، الاستماع الفعال، بدء وإدامة المحادثات، تنمية الذكاء العاطفي، المشاركة في نقاشات بناءة، تحسين مهارات الإقناع، التعامل مع المناسبات الاجتماعية، فهم لغة الجسد، أو التعبير عن نفسك بصراحة. ما الجانب الذي تود تطويره في مهارات التواصل لديك؟"
