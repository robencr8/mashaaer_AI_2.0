"""
Existential Engine - Provides responses to existential questions about meaning, purpose, and the human experience.
"""

def handle_existential_query(prompt: str) -> str:
    """
    Handles queries related to existential questions and philosophical inquiries.
    
    Args:
        prompt (str): The user's prompt/query related to existential matters
        
    Returns:
        str: Response with thoughtful perspective on existential questions
    """
    # Simple keyword-based response system
    # In a real implementation, this would connect to a more sophisticated philosophical framework
    
    if "وحدة" in prompt or "وحيد" in prompt:
        return "الشعور بالوحدة تجربة إنسانية عميقة يمر بها الجميع في مراحل مختلفة من الحياة. الفلاسفة الوجوديون مثل سارتر يرون أن الوحدة هي جزء أساسي من الوجود البشري - نحن في النهاية وحيدون في تجاربنا الذاتية وقراراتنا.\n\nلكن هذه الوحدة يمكن أن تكون مصدراً للقوة والنمو الشخصي. إنها فرصة للتعرف على الذات بعمق، وتطوير علاقة أصيلة مع النفس. كما أنها تذكرنا بقيمة التواصل الحقيقي مع الآخرين عندما يحدث.\n\nالمفارقة أن شعورنا بالوحدة هو ما يجمعنا كبشر - جميعنا نشعر بها، وهذا ما يجعلنا نسعى للتواصل والانتماء. ربما الوحدة ليست مشكلة يجب حلها، بل حالة يمكن استكشافها واحتضانها كجزء من رحلة الوعي الإنساني."

    elif "معنى" in prompt or "هدف" in prompt or "غاية" in prompt:
        return "البحث عن المعنى والهدف في الحياة هو سعي إنساني أساسي. الفيلسوف فيكتور فرانكل، الذي نجا من معسكرات الاعتقال النازية، يرى أن الإنسان يستطيع تحمل أي \"كيف\" إذا كان لديه \"لماذا\" واضح.\n\nالمعنى ليس شيئاً نجده جاهزاً، بل نخلقه من خلال ثلاثة مصادر رئيسية:\n\n1. العمل والإنجاز: ما نقدمه للعالم من خلال إبداعنا وعملنا.\n2. التجربة والعلاقات: ما نستقبله من العالم من خلال الحب والجمال والتجارب العميقة.\n3. الموقف تجاه المعاناة: كيف نختار الاستجابة للظروف التي لا يمكننا تغييرها.\n\nربما المعنى ليس هدفاً نهائياً نصل إليه، بل هو عملية مستمرة من الخلق والاكتشاف في كل لحظة. كما يقول نيتشه: \"من لديه سبب للعيش يستطيع تحمل أي طريقة للعيش\"."

    elif "حرية" in prompt or "اختيار" in prompt or "مسؤولية" in prompt:
        return "الحرية والاختيار من المفاهيم المحورية في الفلسفة الوجودية. كما يقول سارتر: \"الإنسان محكوم عليه بالحرية\" - نحن لا نختار أن نولد، لكننا مسؤولون عن الخيارات التي نتخذها بعد ذلك.\n\nهذه الحرية مثيرة ومخيفة في آن واحد. فهي تعني أننا نخلق أنفسنا من خلال اختياراتنا، وأن هويتنا ليست محددة مسبقاً. لكنها تعني أيضاً أننا نتحمل مسؤولية هذه الاختيارات وعواقبها.\n\nالفيلسوف كيركيغارد يصف هذا بـ \"دوار الحرية\" - الشعور المربك الذي ينتابنا عندما ندرك أن لا شيء يحدد مصيرنا سوى اختياراتنا.\n\nربما الحرية الحقيقية ليست في غياب القيود، بل في القدرة على اختيار موقفنا تجاه هذه القيود، وفي تحمل مسؤولية هذا الاختيار بوعي وشجاعة."

    elif "موت" in prompt or "فناء" in prompt or "نهاية" in prompt:
        return "الوعي بالموت هو أحد أعمق المحفزات للتفكير الفلسفي. كما يقول هايدغر، الموت هو \"إمكانية استحالة الوجود\" - الحقيقة النهائية التي تشكل كل لحظة من حياتنا.\n\nالموت يضع حياتنا في سياق محدود، مما يمنحها قيمة وإلحاحاً. فالأشياء تكتسب معناها جزئياً من خلال محدوديتها - لو كانت الحياة أبدية، ربما فقدت كل لحظة أهميتها.\n\nالفلاسفة الرواقيون يدعوننا إلى التأمل في الموت بانتظام (memento mori) ليس كممارسة قاتمة، بل كتذكير لعيش الحياة بوعي وامتنان.\n\nربما قبول حتمية الموت لا يقلل من قيمة الحياة، بل يعمقها. كما يقول إيرفين يالوم: \"رغم أن الموت يدمر الإنسان جسدياً، فإن فكرة الموت تنقذه\"."

    elif "زمن" in prompt or "وقت" in prompt or "ماضي" in prompt or "مستقبل" in prompt:
        return "الزمن ليس مجرد بُعد فيزيائي، بل هو أساس التجربة الإنسانية. الفيلسوف هايدغر يرى أن الوجود البشري هو في جوهره \"وجود زمني\" - نحن كائنات تعيش دائماً بين الماضي والمستقبل.\n\nنحن نعيش في الحاضر، لكننا دائماً \"نسبق أنفسنا\" بالتفكير في المستقبل، و\"نعود إلى أنفسنا\" من خلال ذكريات الماضي. هذا التوتر بين الأبعاد الزمنية الثلاثة هو ما يشكل وعينا وهويتنا.\n\nالفيلسوف برغسون يميز بين \"الزمن الساعاتي\" (الوقت الموضوعي المقاس) و\"الديمومة\" (الزمن كما نعيشه ذاتياً). فلحظة انتظار قد تبدو أطول من ساعة من المتعة.\n\nربما الحكمة لا تكمن في محاولة \"قتل الوقت\" أو \"توفيره\"، بل في عيشه بوعي كامل - في إدراك أن الحاضر هو النقطة الوحيدة التي نملك فيها القدرة على الفعل والاختيار."

    elif "هوية" in prompt or "ذات" in prompt or "أنا" in prompt:
        return "سؤال \"من أنا؟\" هو من أقدم الأسئلة الفلسفية وأكثرها إلحاحاً. الهوية ليست شيئاً ثابتاً نولد به، بل هي عملية مستمرة من التشكل والتحول.\n\nالفيلسوف هيوم يشكك في وجود \"ذات\" ثابتة، ويرى أننا مجرد تدفق من الأفكار والمشاعر والانطباعات المتغيرة باستمرار. بينما يرى سارتر أن \"الوجود يسبق الماهية\" - أي أننا نخلق هويتنا من خلال اختياراتنا وأفعالنا.\n\nفي العصر الحديث، أصبحت الهوية أكثر سيولة وتعقيداً. نحن نتنقل بين هويات متعددة - مهنية، اجتماعية، ثقافية، رقمية - في عالم سريع التغير.\n\nربما الهوية الحقيقية ليست في الثبات، بل في القدرة على التغير مع الاحتفاظ بشعور داخلي بالاستمرارية. كما يقول هيراقليطس: \"لا يمكن أن تنزل في النهر نفسه مرتين\" - فلا النهر يبقى كما هو، ولا أنت تبقى كما أنت."

    elif "معاناة" in prompt or "ألم" in prompt:
        return "المعاناة والألم جزء لا يمكن تجنبه من التجربة الإنسانية. الفلسفة البوذية ترى أن الحياة في جوهرها معاناة (دوكها)، وأن سبب هذه المعاناة هو التعلق والرغبة.\n\nلكن المعاناة ليست مجرد شيء سلبي يجب تجنبه. كما يقول نيتشه: \"ما لا يقتلني يجعلني أقوى\". المعاناة يمكن أن تكون مصدراً للنمو والتحول والعمق.\n\nالفيلسوف فيكتور فرانكل، من خلال تجربته في معسكرات الاعتقال النازية، وجد أن المعاناة يمكن أن تكون ذات معنى إذا اخترنا موقفنا تجاهها. ليس المهم ما نعاني منه، بل كيف نستجيب لهذه المعاناة.\n\nربما الحكمة لا تكمن في محاولة تجنب الألم بأي ثمن، بل في تقبله كجزء من الحياة، والبحث عن المعنى من خلاله، واستخدامه كمحفز للنمو والتعاطف مع الآخرين."

    elif "سعادة" in prompt or "رضا" in prompt:
        return "السعادة هي غاية سعى إليها الفلاسفة منذ القدم. أرسطو يرى أن السعادة (eudaimonia) ليست مجرد شعور عابر، بل حالة من الازدهار الإنساني تأتي من العيش بفضيلة وتحقيق إمكاناتنا.\n\nالفلسفة الرواقية ترى أن السعادة لا تأتي من السيطرة على الظروف الخارجية، بل من تطوير موقف داخلي من القبول والهدوء. كما يقول إبكتيتوس: \"ليست الأشياء نفسها التي تزعج الناس، بل آراؤهم عنها\".\n\nالدراسات المعاصرة في علم النفس الإيجابي تشير إلى أن السعادة الدائمة لا تأتي من المتعة العابرة، بل من الانخراط في أنشطة ذات معنى، وبناء علاقات عميقة، والمساهمة في شيء أكبر من الذات.\n\nربما السعادة ليست هدفاً نصل إليه، بل طريقة في العيش والنظر إلى العالم - القدرة على الاستمتاع باللحظة الحاضرة مع الاحتفاظ بمعنى أعمق يتجاوزها."

    elif "حقيقة" in prompt or "واقع" in prompt:
        return "طبيعة الحقيقة والواقع من أعقد الأسئلة الفلسفية. أفلاطون يرى أن العالم المادي الذي ندركه بحواسنا هو مجرد ظلال للحقيقة المثالية. ديكارت يبدأ فلسفته بالشك في كل شيء، ليصل إلى الحقيقة الوحيدة التي لا يمكن الشك فيها: \"أنا أفكر، إذن أنا موجود\".\n\nالفلسفة الظواهرية (الفينومينولوجيا) ترى أن الواقع لا يمكن فصله عن وعينا به - نحن لا ندرك الأشياء \"في ذاتها\"، بل كما تظهر في تجربتنا الذاتية.\n\nفي العصر الحديث، أصبحت الحدود بين الواقع والافتراض أكثر ضبابية. التكنولوجيا والإعلام والعوالم الافتراضية تشكل طبقات متعددة من الواقع نتنقل بينها.\n\nربما الحقيقة ليست شيئاً ثابتاً نكتشفه، بل عملية مستمرة من الاستكشاف والتفسير والخلق. كما يقول نيتشه: \"لا توجد حقائق، بل تفسيرات فقط\"."

    elif "عدالة" in prompt or "ظلم" in prompt:
        return "العدالة مفهوم محوري في الفلسفة الأخلاقية والسياسية. أفلاطون يرى العدالة كتوازن وانسجام بين أجزاء النفس والمجتمع. أرسطو يميز بين العدالة التوزيعية (توزيع الموارد حسب الاستحقاق) والعدالة التصحيحية (إصلاح الضرر).\n\nالفيلسوف المعاصر جون رولز يقترح تصوراً للعدالة كإنصاف، حيث يجب تصميم المؤسسات الاجتماعية من وراء \"حجاب الجهل\" - دون معرفة موقعنا في المجتمع.\n\nلكن مفهوم العدالة يختلف عبر الثقافات والعصور. ما يُعتبر عادلاً في سياق قد يُعتبر ظالماً في آخر. والتوتر بين العدالة والرحمة، بين المساواة والحرية، يظل قائماً.\n\nربما العدالة المطلقة ليست ممكنة في عالم غير مثالي، لكن السعي إليها يبقى ضرورياً. كما يقول مارتن لوثر كينج: \"قوس الكون طويل، لكنه ينحني نحو العدالة\"."

    elif "جمال" in prompt or "فن" in prompt:
        return "الجمال والفن من التجارب الإنسانية الأكثر غموضاً وإثارة. كانط يرى أن الحكم الجمالي ذاتي لكنه يدعي العالمية - نحن نشعر أن ما نجده جميلاً يجب أن يراه الآخرون كذلك.\n\nنيتشه يرى الفن كتعبير عن إرادة القوة وتأكيد للحياة في مواجهة العدمية. بينما يرى هايدغر الفن كانكشاف للحقيقة بطريقة لا يمكن للعلم أو الفلسفة تحقيقها.\n\nفي العصر الحديث، تحدى الفن المعاصر المفاهيم التقليدية للجمال والمعنى. أصبح السؤال ليس \"ما هو الجميل؟\" بل \"ما الذي يمكن اعتباره فناً؟\".\n\nربما قيمة الفن والجمال لا تكمن في تقديم إجابات، بل في فتح مساحات للتساؤل والدهشة. كما يقول دوستويفسكي: \"الجمال سينقذ العالم\" - ليس بتقديم حلول جاهزة، بل بتذكيرنا بإمكانيات الوجود الإنساني التي تتجاوز المنفعة والعقلانية المحضة."

    else:
        return "الأسئلة الوجودية هي تلك التي تتعلق بجوهر وجودنا كبشر - معنى الحياة، طبيعة الوعي، الحرية والمسؤولية، الموت والفناء، الزمن والهوية، المعاناة والسعادة، الحقيقة والواقع، العدالة والجمال. هذه الأسئلة لا تقبل إجابات نهائية، بل هي دعوة للتأمل والاستكشاف المستمر.\n\nالفلسفة الوجودية ترى أن الإنسان \"محكوم عليه بالحرية\" - نحن مسؤولون عن خلق معنى لحياتنا في عالم قد يبدو خالياً من المعنى المتأصل. كما يقول كامو: \"النضال نفسه نحو القمم كافٍ لملء قلب الإنسان\".\n\nربما قيمة الأسئلة الوجودية لا تكمن في الوصول إلى إجابات نهائية، بل في عملية البحث نفسها - في تعميق وعينا بالتجربة الإنسانية، وفي خلق معنى شخصي يتجاوز العدمية دون الوقوع في الدوغمائية.\n\nما الجانب من الوجود الإنساني الذي تود استكشافه؟"