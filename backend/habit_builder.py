"""
Habit Builder Engine - Provides guidance for building healthy habits gradually.
"""

def handle_habit_query(prompt: str) -> str:
    """
    Handles queries related to habit formation and behavior change.
    
    Args:
        prompt (str): The user's prompt/query related to habit building
        
    Returns:
        str: Response with guidance for building healthy habits
    """
    # Simple keyword-based response system
    # In a real implementation, this would connect to a more sophisticated habit tracking system
    
    if "بداية" in prompt or "تكوين" in prompt or "بدء" in prompt:
        return "لبدء تكوين عادة جديدة بنجاح:\n\n1. ابدأ صغيراً جداً: اختر عادة بسيطة للغاية لا تستغرق أكثر من دقيقتين في البداية.\n\n2. اربطها بعادة موجودة: حدد \"مرساة\" - شيء تفعله بانتظام يومياً - واجعل العادة الجديدة تأتي مباشرة بعده.\n\n3. حدد وقتاً ومكاناً محددين: \"بعد [المرساة]، سأقوم بـ [العادة الجديدة] في [المكان]\".\n\n4. احتفل فوراً: بعد أداء العادة مباشرة، احتفل بطريقة صغيرة (ابتسامة، إيماءة، كلمة تشجيع لنفسك).\n\n5. تتبع تقدمك: استخدم تقويماً أو تطبيقاً لتسجيل التزامك اليومي.\n\n6. كن صبوراً: العادات تستغرق وقتاً للترسخ، والاتساق أهم من الكمال.\n\nتذكر: النجاح في تكوين عادات جديدة يعتمد على جعلها واضحة، جذابة، سهلة، ومُرضية."

    elif "رياضة" in prompt or "تمرين" in prompt:
        return "لبناء عادة ممارسة الرياضة بانتظام:\n\n1. ابدأ بمدة قصيرة جداً: 5-10 دقائق يومياً أفضل من ساعة مرة واحدة في الأسبوع.\n\n2. اختر نشاطاً ممتعاً: الالتزام بنشاط تستمتع به أسهل بكثير.\n\n3. جهز معداتك مسبقاً: ضع ملابس الرياضة في مكان واضح لتقليل العوائق.\n\n4. حدد وقتاً ثابتاً: مثل \"بعد الاستيقاظ مباشرة\" أو \"بعد العودة من العمل\".\n\n5. اجعلها اجتماعية: ممارسة الرياضة مع صديق تزيد من المساءلة والمتعة.\n\n6. تدرج ببطء: زد المدة أو الشدة تدريجياً بنسبة 10% أسبوعياً.\n\n7. ضع خطة للعقبات: حدد مسبقاً كيف ستتعامل مع الظروف التي قد تعيقك.\n\nتذكر: الاتساق أهم من الكثافة، والتمرين القصير الذي تؤديه بانتظام أفضل من التمرين الطويل الذي تتخلى عنه."

    elif "قراءة" in prompt or "مطالعة" in prompt:
        return "لتطوير عادة القراءة المنتظمة:\n\n1. ابدأ بـ 5 دقائق يومياً: حتى صفحة واحدة أفضل من لا شيء.\n\n2. اختر كتباً تستمتع بها حقاً: لا تقرأ ما \"يجب\" قراءته، بل ما يثير اهتمامك.\n\n3. اجعل الكتب في متناول اليد: ضع كتاباً في حقيبتك، بجانب سريرك، في سيارتك.\n\n4. حدد وقتاً ثابتاً: مثل \"قبل النوم مباشرة\" أو \"أثناء وجبة الإفطار\".\n\n5. قلل المشتتات: ضع هاتفك في وضع الطيران أثناء وقت القراءة.\n\n6. انضم لنادي كتاب أو تحدٍ للقراءة: المساءلة الاجتماعية تعزز الالتزام.\n\n7. تتبع تقدمك: سجل الكتب التي قرأتها والوقت الذي تقضيه في القراءة.\n\nتذكر: القراءة المنتظمة تبني نفسها - كلما قرأت أكثر، كلما أصبحت أسهل وأكثر متعة."

    elif "غذاء" in prompt or "أكل" in prompt or "طعام" in prompt:
        return "لبناء عادات غذائية صحية:\n\n1. غيّر بيئتك الغذائية: احتفظ بأطعمة صحية في متناول اليد وأخفِ الأطعمة غير الصحية.\n\n2. ابدأ بتغيير واحد صغير: مثل إضافة خضار لوجبة واحدة يومياً، أو شرب كوب ماء إضافي.\n\n3. خطط لوجباتك مسبقاً: التخطيط الأسبوعي يقلل من اتخاذ قرارات غذائية سيئة عند الجوع.\n\n4. استخدم أطباقاً أصغر: يساعد في التحكم بحجم الوجبات دون الشعور بالحرمان.\n\n5. تناول الطعام ببطء ووعي: استمتع بكل لقمة وتوقف عند الشبع.\n\n6. اجعل الأكل الصحي ممتعاً: جرب وصفات جديدة وأضف نكهات لذيذة للأطعمة الصحية.\n\n7. كن لطيفاً مع نفسك: الانحراف المؤقت عن المسار لا يعني الفشل، بل هو جزء من الرحلة.\n\nتذكر: التغييرات الصغيرة المستدامة أفضل بكثير من الحميات القاسية قصيرة المدى."

    elif "ماء" in prompt or "شرب" in prompt:
        return "لتطوير عادة شرب المزيد من الماء:\n\n1. ابدأ يومك بكوب ماء: ضع كوباً بجانب سريرك لتشربه فور الاستيقاظ.\n\n2. استخدم مذكرات محددة: اشرب كوباً مع كل وجبة، وبعد كل مرة تستخدم فيها الحمام.\n\n3. احمل زجاجة ماء معك دائماً: ما لا نراه، لا نتذكره.\n\n4. استخدم تطبيقات تذكير: هناك تطبيقات مخصصة لتذكيرك بشرب الماء.\n\n5. أضف نكهة طبيعية: الليمون، النعناع، أو الخيار لجعل الماء أكثر جاذبية.\n\n6. استبدل مشروباً واحداً يومياً بالماء: تدرج في تقليل المشروبات الأخرى.\n\n7. اربط الشرب بأنشطة روتينية: مثل شرب كوب ماء قبل كل اجتماع أو بعد كل ساعة عمل.\n\nتذكر: الترطيب الجيد يحسن الطاقة، التركيز، المزاج، ويقلل الشعور بالجوع."

    elif "نوم" in prompt or "استيقاظ" in prompt:
        return "لتطوير عادات نوم صحية:\n\n1. حدد موعداً ثابتاً للنوم والاستيقاظ: حتى في عطلات نهاية الأسبوع.\n\n2. طور روتيناً مسائياً مهدئاً: 30-60 دقيقة من الأنشطة المريحة قبل النوم.\n\n3. أبعد الشاشات: تجنب الهواتف والأجهزة الإلكترونية قبل النوم بساعة على الأقل.\n\n4. هيئ بيئة نوم مثالية: غرفة مظلمة، هادئة، وباردة نسبياً.\n\n5. تجنب المنبهات: لا تتناول الكافيين بعد الظهر، وتجنب الوجبات الثقيلة قبل النوم.\n\n6. تعرض للضوء الطبيعي صباحاً: يساعد في ضبط الساعة البيولوجية.\n\n7. مارس الرياضة بانتظام: لكن ليس قبل النوم مباشرة.\n\nتذكر: النوم الجيد ليس رفاهية بل ضرورة صحية تؤثر على كل جانب من جوانب حياتك."

    elif "تأجيل" in prompt or "تسويف" in prompt or "مماطلة" in prompt:
        return "للتغلب على عادة التأجيل والمماطلة:\n\n1. استخدم تقنية 2 دقيقة: إذا كان الأمر يستغرق أقل من دقيقتين، افعله فوراً.\n\n2. قسّم المهام الكبيرة: حول المشاريع الضخمة إلى خطوات صغيرة محددة.\n\n3. استخدم تقنية بومودورو: اعمل لمدة 25 دقيقة ثم خذ استراحة 5 دقائق.\n\n4. ابدأ بأصعب مهمة: تناول \"الضفدع الأكبر\" في بداية يومك عندما تكون طاقتك في أعلى مستوياتها.\n\n5. قلل المشتتات: أغلق الإشعارات وحدد أوقاتاً محددة للتحقق من البريد الإلكتروني ووسائل التواصل.\n\n6. استخدم قاعدة 5-4-3-2-1: عد تنازلياً من 5 ثم ابدأ العمل فوراً.\n\n7. طبق مبدأ \"الكمال عدو الإنجاز\": ابدأ بنسخة أولية غير مثالية بدلاً من الانتظار حتى تكون الظروف مثالية.\n\nتذكر: التأجيل عادة يمكن كسرها من خلال بناء عادات جديدة أفضل تحل محلها."

    elif "تأمل" in prompt or "تنفس" in prompt or "استرخاء" in prompt:
        return "لبناء عادة التأمل والاسترخاء اليومي:\n\n1. ابدأ بدقيقة واحدة فقط: مدة قصيرة جداً تجعل البداية سهلة.\n\n2. حدد وقتاً ثابتاً: مثل \"بعد الاستيقاظ مباشرة\" أو \"قبل النوم\".\n\n3. هيئ مكاناً مخصصاً: ركن هادئ بسيط يذكرك بممارسة التأمل.\n\n4. استخدم تطبيقات موجهة: تطبيقات التأمل تساعد المبتدئين على الالتزام.\n\n5. اربطه بعادة راسخة: مثل شرب القهوة الصباحية أو بعد تنظيف الأسنان.\n\n6. لا تحكم على تجربتك: تقبل أن عقلك سيشرد، وأن التأمل مهارة تتطور مع الوقت.\n\n7. تدرج ببطء: زد المدة تدريجياً بمعدل دقيقة واحدة أسبوعياً.\n\nتذكر: التأمل المنتظم، حتى لفترات قصيرة، يمكن أن يحدث تغييرات إيجابية كبيرة في مستويات التوتر والتركيز والرفاهية العامة."

    elif "كتابة" in prompt or "تدوين" in prompt or "يوميات" in prompt:
        return "لتطوير عادة الكتابة اليومية أو تدوين اليوميات:\n\n1. ابدأ بثلاث جمل فقط: اجعل البداية سهلة للغاية.\n\n2. حدد وقتاً ثابتاً: صباحاً للتخطيط والتركيز، أو مساءً للتفكر والامتنان.\n\n3. استخدم محفزات: أسئلة محددة مثل \"ما أكثر شيء أنا ممتن له اليوم؟\" أو \"ما التحدي الذي واجهته؟\".\n\n4. اجعل أدوات الكتابة في متناول اليد: دفتر جميل وقلم تحبه، أو تطبيق سهل الاستخدام.\n\n5. لا تقلق بشأن الجودة: الكتابة اليومية للعينين الخاصة فقط، وليست للنشر.\n\n6. اربطها بروتين قائم: مثل الكتابة أثناء شرب القهوة الصباحية أو قبل النوم مباشرة.\n\n7. احتفظ بسجل مرئي: ضع علامة على التقويم في كل يوم تكتب فيه لتبني سلسلة متواصلة.\n\nتذكر: الكتابة المنتظمة تساعد في توضيح الأفكار، تقليل التوتر، وتوثيق رحلتك الشخصية."

    elif "إيجابية" in prompt or "امتنان" in prompt:
        return "لبناء عادة التفكير الإيجابي والامتنان:\n\n1. دوّن ثلاثة أشياء تشعر بالامتنان لها يومياً: حتى الأشياء الصغيرة تستحق الشكر.\n\n2. غيّر لغتك الداخلية: لاحظ الحديث السلبي مع الذات واستبدله بعبارات أكثر توازناً.\n\n3. ابدأ ونهِ يومك بفكرة إيجابية: اجعلها أول وآخر فكرة في عقلك.\n\n4. مارس \"الإيجابية الواقعية\": ليس إنكار التحديات، بل رؤية الفرص فيها.\n\n5. أحط نفسك بالإيجابية: كتب، بودكاست، أشخاص يلهمونك ويرفعون معنوياتك.\n\n6. مارس العطاء والمساعدة: مساعدة الآخرين تعزز مشاعر الرضا والإيجابية.\n\n7. احتفل بالنجاحات الصغيرة: لا تنتظر الإنجازات الكبيرة لتشعر بالفخر.\n\nتذكر: التفكير الإيجابي ليس تجاهل الواقع، بل اختيار منظور متوازن يسمح لك بالتعامل مع التحديات بفعالية أكبر."

    elif "تغيير" in prompt or "تخلص" in prompt or "سيئة" in prompt:
        return "لتغيير العادات السيئة أو التخلص منها:\n\n1. حدد المحفزات: لاحظ متى وأين ولماذا تمارس العادة السيئة.\n\n2. غيّر البيئة: عدّل محيطك لتقليل التعرض للمحفزات.\n\n3. استبدل العادة: حدد سلوكاً إيجابياً بديلاً يلبي نفس الحاجة الأساسية.\n\n4. قلل الاحتكاك: اجعل العادة السيئة أكثر صعوبة وأقل جاذبية.\n\n5. استخدم العقود الذاتية: التزم علناً بالتغيير وحدد عواقب واضحة.\n\n6. اطلب الدعم: أخبر الأصدقاء أو العائلة بهدفك ليساعدوك في المساءلة.\n\n7. تتبع تقدمك: سجل الأيام التي نجحت فيها في تجنب العادة السيئة.\n\nتذكر: تغيير العادات عملية تدريجية، والانتكاسات جزء طبيعي من الرحلة. المهم هو الاستمرار والتعلم من كل تجربة."

    else:
        return "بناء العادات الصحية هو أساس التغيير الإيجابي المستدام في الحياة. يمكنني مساعدتك في تطوير عادات جديدة أو تغيير عادات قائمة في مجالات مختلفة مثل: بدء عادات جديدة، ممارسة الرياضة بانتظام، تطوير عادة القراءة، تحسين العادات الغذائية، زيادة شرب الماء، تنظيم النوم، التغلب على التأجيل والمماطلة، ممارسة التأمل والاسترخاء، الكتابة اليومية، تعزيز التفكير الإيجابي، أو التخلص من العادات السيئة. ما المجال الذي تود تطوير عادات صحية فيه؟"