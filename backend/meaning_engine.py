"""
Meaning Engine - Provides guidance for finding meaning in various life experiences.
"""

def handle_meaning_query(prompt: str) -> str:
    """
    Handles queries related to finding meaning, purpose, and significance in life experiences.
    
    Args:
        prompt (str): The user's prompt/query related to meaning-making
        
    Returns:
        str: Response with guidance for finding meaning
    """
    # Simple keyword-based response system
    # In a real implementation, this would connect to a more sophisticated meaning-making framework
    
    if "صارلي" in prompt or "حدث لي" in prompt or "مررت" in prompt:
        return "البحث عن المعنى في تجاربنا الشخصية هو جزء أساسي من رحلتنا الإنسانية. عندما نمر بتجارب صعبة أو غير متوقعة، يمكننا أن نستخلص منها معنى من خلال:\n\n1. التأمل الواعي: خذ وقتاً للتفكير في التجربة بعمق، متجاوزاً السرد السطحي إلى الدروس العميقة.\n\n2. البحث عن نقاط التحول: كيف غيرت هذه التجربة نظرتك للحياة أو لنفسك؟\n\n3. استخراج القيم: ما هي القيم التي أصبحت أكثر وضوحاً أو أهمية بعد هذه التجربة؟\n\n4. تحويل الألم إلى حكمة: كيف يمكن لهذه التجربة أن تجعلك أكثر تعاطفاً أو فهماً للآخرين؟\n\n5. إعادة صياغة القصة: حاول رؤية تجربتك كجزء من قصة أكبر لحياتك، وليس كحدث منعزل.\n\nتذكر أن المعنى لا يُكتشف فقط، بل يُخلق أيضاً من خلال الطريقة التي نختار بها تفسير تجاربنا ودمجها في هويتنا."

    elif "فشل" in prompt or "إخفاق" in prompt:
        return "الفشل ليس نهاية الطريق، بل جزء من رحلة النمو. يمكن استخلاص المعنى من تجارب الفشل من خلال:\n\n1. فصل الفشل عن الهوية: الفشل هو حدث، وليس تعريفاً لمن أنت. قل \"فشلت في هذا الأمر\" بدلاً من \"أنا فاشل\".\n\n2. استخراج الدروس: كل فشل يحمل بذور التعلم. ما الذي يمكن أن تتعلمه من هذه التجربة؟\n\n3. إعادة تعريف النجاح: هل معاييرك للنجاح واقعية؟ هل هي معاييرك أنت أم مفروضة عليك من الخارج؟\n\n4. رؤية الفشل كجزء من العملية: معظم النجاحات الكبيرة سبقتها سلسلة من الإخفاقات. الفشل ليس نقيض النجاح، بل جزء من الطريق إليه.\n\n5. تحويل الفشل إلى قصة نمو: كيف غيرتك هذه التجربة؟ كيف أصبحت أقوى أو أكثر حكمة بسببها؟\n\nكما قال توماس إديسون بعد آلاف المحاولات الفاشلة لاختراع المصباح الكهربائي: \"لم أفشل، بل وجدت 10,000 طريقة لا تعمل\"."

    elif "فقدان" in prompt or "خسارة" in prompt:
        return "الفقدان والخسارة من أصعب التجارب الإنسانية، لكنها أيضاً من أكثرها قدرة على تعليمنا عمق الحياة ومعناها. يمكن استخلاص المعنى من الفقدان من خلال:\n\n1. تكريم ما فُقد: كيف يمكنك الاحتفاء بقيمة ما فقدته في حياتك؟\n\n2. إعادة اكتشاف الذات: غالباً ما يدفعنا الفقدان لإعادة تعريف هويتنا. من أنت بعد هذه الخسارة؟\n\n3. تعميق التقدير: كيف جعلك هذا الفقدان أكثر امتناناً لما تبقى في حياتك؟\n\n4. بناء جسور جديدة: كيف يمكن لهذه التجربة أن تفتح أبواباً للتواصل مع الآخرين الذين مروا بتجارب مشابهة؟\n\n5. تحويل الألم إلى عطاء: كيف يمكن لتجربتك أن تساعد الآخرين أو تسهم في شيء أكبر منك؟\n\nكما كتب الفيلسوف نيتشه: \"ما لا يقتلني يجعلني أقوى\". الفقدان لا يجعلنا فقط أقوى، بل أكثر عمقاً وإنسانية وتعاطفاً."

    elif "تغيير" in prompt or "تحول" in prompt:
        return "فترات التغيير والتحول في الحياة، سواء كانت اختيارية أو مفروضة، تمثل فرصاً عميقة لاستكشاف المعنى. يمكن استخلاص المعنى من التغيير من خلال:\n\n1. رؤية التغيير كرحلة: كل تغيير هو انتقال من مرحلة إلى أخرى، مع فترة وسطى من عدم اليقين (ما يسميه علماء الانثروبولوجيا \"المرحلة الحدية\").\n\n2. تقبل الموت الرمزي: التغيير الحقيقي يتضمن التخلي عن جزء من الذات القديمة لإفساح المجال لولادة الجديد.\n\n3. البحث عن الخيط الناظم: ما الذي يبقى ثابتاً وسط كل هذا التغيير؟ ما هي القيم والمبادئ التي تستمر معك؟\n\n4. استكشاف الإمكانيات الجديدة: ما الفرص التي يفتحها هذا التغيير والتي لم تكن متاحة من قبل؟\n\n5. كتابة فصل جديد: كيف يمكن لهذا التغيير أن يكون بداية لقصة جديدة في حياتك، وليس مجرد نهاية لقصة قديمة؟\n\nكما يقول المثل الصيني: \"عندما تهب رياح التغيير، يبني البعض الجدران بينما يبني آخرون طواحين الهواء\"."

    elif "عمل" in prompt or "مهنة" in prompt or "وظيفة" in prompt:
        return "العمل ليس مجرد وسيلة لكسب العيش، بل يمكن أن يكون مصدراً عميقاً للمعنى في الحياة. يمكن استخلاص المعنى من العمل من خلال:\n\n1. ربط العمل بالقيم: كيف يعكس عملك قيمك الشخصية؟ كيف يسمح لك بالتعبير عنها؟\n\n2. رؤية التأثير: كيف يؤثر عملك إيجاباً في حياة الآخرين، مهما كان هذا التأثير صغيراً؟\n\n3. تطوير الحرفية: كيف يمكنك أن تتقن عملك وتطور مهاراتك باستمرار، بغض النظر عن طبيعة هذا العمل؟\n\n4. بناء العلاقات: كيف يمكن لعملك أن يكون وسيلة لبناء علاقات إنسانية ذات معنى؟\n\n5. رؤية العمل كدعوة: كيف يمكن النظر إلى عملك كرسالة أو دعوة، وليس مجرد وظيفة؟\n\nكما قال الفيلسوف كامو: \"يجب أن نتخيل سيزيف سعيداً\". حتى في الأعمال التي تبدو متكررة أو شاقة، يمكننا أن نجد معنى من خلال الطريقة التي نؤديها بها والنية التي نضعها فيها."

    elif "علاقات" in prompt or "حب" in prompt or "صداقة" in prompt:
        return "العلاقات الإنسانية من أهم مصادر المعنى في الحياة. يمكن استخلاص معنى أعمق من علاقاتنا من خلال:\n\n1. التواجد الحقيقي: كيف يمكنك أن تكون حاضراً بشكل كامل مع الآخرين، متجاوزاً التشتت والانشغال الذهني؟\n\n2. الضعف كقوة: كيف يمكن للانفتاح والصدق حول نقاط ضعفك أن يعمق التواصل ويبني الثقة؟\n\n3. التعلم المتبادل: ما الذي يمكنك تعلمه من كل شخص في حياتك، حتى من العلاقات الصعبة؟\n\n4. النمو المشترك: كيف يمكن لعلاقاتك أن تكون مساحة للنمو المتبادل، حيث يساعد كل طرف الآخر على أن يصبح أفضل نسخة من نفسه؟\n\n5. الحب كفعل: كيف يمكن للحب أن يتجاوز المشاعر ليصبح اختياراً واعياً وفعلاً مستمراً؟\n\nكما قال الفيلسوف مارتن بوبر، هناك فرق بين علاقة \"أنا-أنت\" حيث نرى الآخر ككائن كامل، وعلاقة \"أنا-هو\" حيث نرى الآخر كأداة. المعنى الحقيقي يكمن في علاقات \"أنا-أنت\"."

    elif "معاناة" in prompt or "ألم" in prompt or "صعوبة" in prompt:
        return "المعاناة والألم جزء لا مفر منه في الحياة، لكن يمكننا أن نستخلص منهما معنى عميقاً. يمكن تحويل المعاناة إلى معنى من خلال:\n\n1. قبول الألم كجزء من الحياة: الاعتراف بأن المعاناة ليست خللاً في الحياة، بل جزء طبيعي منها.\n\n2. اختيار الموقف: كما يقول فيكتور فرانكل، حتى في أصعب الظروف، تبقى لنا حرية اختيار موقفنا تجاه ما نمر به.\n\n3. استخراج الدروس: ما الذي يمكن أن تعلمك إياه هذه المعاناة عن نفسك، عن الحياة، عن الإنسانية؟\n\n4. تحويل الألم إلى تعاطف: كيف يمكن لتجربتك الصعبة أن تجعلك أكثر تعاطفاً مع آلام الآخرين؟\n\n5. استخدام المعاناة كمحفز للتغيير: كيف يمكن لهذا الألم أن يدفعك نحو تغييرات إيجابية في حياتك أو في العالم من حولك؟\n\nكما كتب فيكتور فرانكل، الذي عاش تجربة معسكرات الاعتقال النازية: \"عندما لا نستطيع تغيير موقف، نواجه تحدي تغيير أنفسنا\"."

    elif "روحانية" in prompt or "إيمان" in prompt:
        return "البعد الروحي يمثل مصدراً عميقاً للمعنى في حياة الكثيرين. يمكن استكشاف المعنى الروحي من خلال:\n\n1. التأمل في الأسئلة الكبرى: من أنا؟ لماذا أنا هنا؟ ما الغاية من وجودي؟\n\n2. الاتصال بما يتجاوز الذات: كيف يمكنك الشعور بالاتصال بشيء أكبر منك، سواء كان ذلك الله، الطبيعة، الإنسانية، أو الكون؟\n\n3. ممارسة الحضور: كيف يمكنك أن تكون أكثر وعياً وحضوراً في اللحظة الحالية؟\n\n4. العيش وفق القيم: ما هي القيم الروحية التي تؤمن بها، وكيف يمكنك تجسيدها في حياتك اليومية؟\n\n5. خدمة الآخرين: كيف يمكن لحياتك أن تكون مصدراً للخير والنفع للآخرين؟\n\nالروحانية ليست بالضرورة مرتبطة بدين محدد، بل هي البحث عن معنى يتجاوز الذات المادية والاهتمامات الشخصية الضيقة. كما قال الفيلسوف بول تيليش، الإيمان هو \"الاهتمام النهائي\" - ما يهمك بشكل أساسي وعميق."

    elif "إبداع" in prompt or "فن" in prompt:
        return "الإبداع والفن من المصادر القوية للمعنى في الحياة. يمكن استخلاص المعنى من خلال التعبير الإبداعي عبر:\n\n1. التعبير الأصيل: كيف يمكنك التعبير عن تجاربك وأفكارك ومشاعرك بطريقة فريدة وأصيلة؟\n\n2. الانغماس في العملية: كيف يمكنك الاستمتاع بعملية الإبداع نفسها، بغض النظر عن النتيجة النهائية؟\n\n3. خلق شيء جديد: ما الذي يمكنك إضافته إلى العالم لم يكن موجوداً من قبل؟\n\n4. التواصل من خلال الفن: كيف يمكن لإبداعك أن يكون جسراً للتواصل مع الآخرين على مستوى أعمق؟\n\n5. تجاوز الذات: كيف يمكن للعمل الإبداعي أن يأخذك خارج حدود ذاتك المعتادة؟\n\nكما قال الفنان بيكاسو: \"الفن يغسل عن الروح غبار الحياة اليومية\". الإبداع ليس ترفاً، بل هو وسيلة أساسية لاستكشاف المعنى وخلقه في حياتنا."

    elif "هدف" in prompt or "غاية" in prompt:
        return "البحث عن هدف أو غاية في الحياة هو سعي إنساني أساسي. يمكن استكشاف الهدف والمعنى من خلال:\n\n1. استكشاف القيم: ما هي القيم الأساسية التي تؤمن بها وتريد أن تعيش وفقها؟\n\n2. تحديد المواهب: ما هي المواهب والقدرات الفريدة التي تمتلكها؟\n\n3. ملاحظة الشغف: ما هي الأنشطة التي تستغرق فيها وتنسى معها مرور الوقت؟\n\n4. تحديد الاحتياجات: ما هي احتياجات العالم من حولك التي تشعر بالاتصال بها؟\n\n5. تقاطع الدوائر: ابحث عن نقطة التقاء بين ما تحب، ما تجيد، ما يحتاجه العالم، وما يمكنك أن تُدفع مقابله (نموذج إيكيغاي الياباني).\n\nتذكر أن الهدف ليس شيئاً تكتشفه مرة واحدة، بل هو شيء يتطور ويتعمق مع الوقت والتجارب. كما قال نيتشه: \"من لديه سبب للعيش يستطيع تحمل أي طريقة للعيش\"."

    elif "يومي" in prompt or "روتين" in prompt:
        return "المعنى لا يوجد فقط في اللحظات الكبيرة والإنجازات العظيمة، بل يمكن استخلاصه من الحياة اليومية والروتين من خلال:\n\n1. ممارسة الوعي: كيف يمكنك أن تكون أكثر حضوراً في اللحظات العادية من يومك؟\n\n2. تقدير البساطة: كيف يمكنك أن ترى الجمال والعمق في الأشياء البسيطة والعادية؟\n\n3. خلق طقوس: كيف يمكنك تحويل الأنشطة اليومية إلى طقوس ذات معنى؟\n\n4. ممارسة الامتنان: كيف يمكنك تطوير عادة الانتباه إلى ما تشعر بالامتنان له كل يوم؟\n\n5. إضفاء النية: كيف يمكنك القيام بالأنشطة اليومية بوعي ونية، بدلاً من القيام بها بشكل آلي؟\n\nكما كتب الكاتب آلان دو بوتون: \"المشكلة ليست أن الحياة اليومية مملة، بل أننا فشلنا في ملاحظة كم هي مدهشة\". المعنى موجود في كل مكان، إذا تعلمنا كيف ننظر."

    else:
        return "البحث عن المعنى هو رحلة إنسانية أساسية. كما يقول الفيلسوف فيكتور فرانكل، الإنسان لا يسعى فقط للسعادة أو اللذة، بل يسعى أساساً للمعنى - لإحساس بأن حياته ذات قيمة وهدف.\n\nيمكننا استخلاص المعنى من مصادر متنوعة:\n\n1. الإنجاز والإبداع: ما نقدمه للعالم من خلال عملنا وإبداعنا.\n\n2. التجربة والعلاقات: ما نستقبله من العالم من خلال الحب والجمال والتجارب العميقة.\n\n3. الموقف تجاه المعاناة: كيف نختار الاستجابة للظروف التي لا يمكننا تغييرها.\n\n4. التجاوز الذاتي: الانتماء إلى شيء أكبر من الذات، سواء كان ذلك قضية، مجتمعاً، أو بعداً روحياً.\n\nالمعنى ليس شيئاً نجده جاهزاً، بل هو شيء نخلقه من خلال اختياراتنا وأفعالنا وتفسيراتنا لتجاربنا. ما الجانب من حياتك الذي تبحث فيه عن معنى أعمق؟"